<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Wette bearbeiten - {{ bet.title }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
<div class="container">
    <div class="top-right">
        <a href="{{ url_for('admin.dashboard') }}">ðŸ”™ Dashboard</a>
        <a href="{{ url_for('main.logout') }}">Logout</a>
    </div>

    <h1>Wette bearbeiten: {{ bet.title }}</h1>

    <form method="POST" class="auth-form">
        <input type="text" name="title" placeholder="Titel" value="{{ bet.title }}" required>
        <input type="text" name="description" placeholder="Beschreibung" value="{{ bet.description }}">

        {% for i in range(4) %}
            <input type="text" name="option{{ i+1 }}" placeholder="Option {{ i+1 }}" value="{{ options[i] }}">
        {% endfor %}

        <label for="deadline">Deadline:</label>
        <input type="datetime-local" name="deadline" value="{{ bet.deadline.strftime('%Y-%m-%dT%H:%M') if bet.deadline }}">

        <button type="submit">âœ… Speichern</button>
    </form>

    <h2>Statistik</h2>
    <div class="vote-stats">
        {% set total_votes = bets_stats[bet.id].values() | sum %}
        {% for option, votes in bets_stats[bet.id].items() %}
            {% set percent = (votes / total_votes * 100) if total_votes > 0 else 0 %}
            <div class="stat-bar-container">
                <div class="stat-bar" style="width: {{ percent }}%;"></div>
                <span>{{ option }}: {{ votes }} Stimmen ({{ percent|round(1) }}%)</span>
            </div>
        {% endfor %}
    </div>

    {% if bet.result %}
        <p>Ergebnis: <strong>{{ bet.result }}</strong></p>
    {% endif %}
</div>
</body>
</html>
